<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8" />
<title>Free Fire Tournament</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" /><script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, onSnapshot, addDoc, query, where } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBvObxADcAior6R_or9O6UmWsFT8do1GkI",
  authDomain: "sqladmin-ff04d.firebaseapp.com",
  projectId: "sqladmin-ff04d",
  storageBucket: "sqladmin-ff04d.firebasestorage.app",
  messagingSenderId: "539086978850",
  appId: "1:539086978850:web:261e6a0cf3c9a2aa29ef7b"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

let currentMatch = null;

onSnapshot(collection(db, "matches"), snap => {
  const box = document.getElementById('matches');
  box.innerHTML = "";
  snap.forEach(d => {
    const m = d.data();
    box.innerHTML += `
      <div class="card">
        <h3>${m.type}</h3>
        <p>Entry: ₹${m.entry}</p>
        <p>Win: ₹${m.win}</p>
        <p>Status: <span class="${m.status}">${m.status}</span></p>
        ${m.status === 'open' ? `<button onclick="joinMatch('${d.id}', ${m.entry})">JOIN MATCH</button>` : ''}
        ${m.status === 'approved' ? `<div class="room">Room ID: ${m.roomId}<br>Password: ${m.password}</div>` : ''}
      </div>`;
  });
});

window.joinMatch = (id, amt) => {
  currentMatch = { id, amt };
  openPay(amt);
};

window.submitPayment = async () => {
  const utr = document.getElementById('utr').value;
  if(!utr) return alert('Enter UTR');
  await addDoc(collection(db, 'payments'), {
    matchId: currentMatch.id,
    utr,
    status: 'pending',
    time: Date.now()
  });
  alert('Payment Submitted. Wait for approval');
  closePay();
};
</script><style>
body{margin:0;background:#050505;color:#fff;font-family:Arial}
header{text-align:center;padding:20px;background:#000;border-bottom:2px solid gold}
header h1{color:gold;margin:0}
header p{color:#aaa;margin-top:5px}
#matches{padding:20px}
.card{background:#0f0f0f;border:1px solid #333;padding:15px;border-radius:15px;margin-bottom:15px}
.card h3{color:#00ff88}
button{width:100%;padding:12px;margin-top:10px;background:gold;border:none;border-radius:10px;font-weight:bold;cursor:pointer}
.open{color:#00ff88}
.approved{color:gold}
.room{margin-top:10px;background:#000;padding:10px;border-radius:10px;color:#00ff88}
footer{text-align:center;padding:15px;color:#777;font-size:0.9rem}
#pay{position:fixed;inset:0;background:#000d;display:none;align-items:center;justify-content:center}
.paybox{background:#111;padding:20px;border-radius:20px;width:90%;max-width:350px;text-align:center;border:2px solid gold}
.paybox h2{color:gold}
input{width:100%;padding:12px;margin-top:10px;background:#000;border:1px solid #444;color:#00ff88;border-radius:10px}
</style></head>
<body><header>
  <h1>FREE FIRE TOURNAMENT</h1>
  <p>Join • Play • Win Real Cash</p>
</header><div id="matches"></div><footer>
  © 2026 SQL — Premium Tournament System
</footer><div id="pay">
  <div class="paybox">
    <h2>Complete Payment</h2>
    <p>Pay via UPI & enter UTR</p>
    <input id="utr" placeholder="Enter UTR" />
    <button onclick="submitPayment()">SUBMIT PAYMENT</button>
    <button onclick="closePay()" style="background:#222;color:#fff;margin-top:10px">Cancel</button>
  </div>
</div><script>
function openPay(){ document.getElementById('pay').style.display='flex'; }
function closePay(){ document.getElementById('pay').style.display='none'; }
</script></body>
</html>

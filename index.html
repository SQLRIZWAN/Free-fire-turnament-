<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>FREE FIRE TOURNAMENT ‚Äî SQL</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover" />
  <!-- Firebase (v10 modules) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import {
      getAuth,
      createUserWithEmailAndPassword,
      signInWithEmailAndPassword,
      signOut,
      onAuthStateChanged
    } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    import {
      getFirestore,
      collection,
      onSnapshot,
      addDoc,
      query,
      where,
      orderBy,
      limit,
      doc,
      getDoc
    } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    // ---------- FIREBASE CONFIG (provided)
    const firebaseConfig = {
      apiKey: "AIzaSyBvObxADcAior6R_or9O6UmWsFT8do1GkI",
      authDomain: "sqladmin-ff04d.firebaseapp.com",
      projectId: "sqladmin-ff04d",
      storageBucket: "sqladmin-ff04d.firebasestorage.app",
      messagingSenderId: "539086978850",
      appId: "1:539086978850:web:261e6a0cf3c9a2aa29ef7b",
      measurementId: "G-KH4J0CZ9M5"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    // ---------- UI state
    let currentMatch = null;     // { id, amt }
    let lastPaymentDocId = null; // track user's last payment for status view
    let lang = 'en';             // en / hi / ur (roman) simple switch

    // ---------- Helpers for translations (simple strings)
    const STR = {
      en: {
        title: 'FREE FIRE TOURNAMENT',
        subtitle: 'Join ‚Ä¢ Play ‚Ä¢ Win Real Cash',
        join: 'JOIN MATCH',
        joinClosed: 'Join Closed',
        full: 'Full',
        proceedPayment: 'Complete Payment',
        enterUTR: 'Enter UTR / TXID',
        submitPayment: 'SUBMIT PAYMENT',
        cancel: 'Cancel',
        waitingApproval: 'waiting ‚Äî payment approval required',
        paymentSubmitted: 'Payment submitted ‚Äî waiting approval',
        paymentInProgress: 'Payment in progress ‚Äî please wait',
        roomWaiting: 'Room: waiting ‚Äî payment approval required',
        refundMsg: 'Refunds processed within 20 minutes.',
        policyTitle: 'Policy',
        policyText: 'This game involves risk. Play at your own risk.',
        whatsappLabel: 'WhatsApp',
        loginLabel: 'Login / Register',
        homeLabel: 'Home'
      },
      hi: {
        title: 'FREE FIRE TOURNAMENT',
        subtitle: 'Join ‚Ä¢ Play ‚Ä¢ Win Real Cash',
        join: '‡§Æ‡•à‡§ö ‡§ú‡•â‡§á‡§® ‡§ï‡§∞‡•á‡§Ç',
        joinClosed: '‡§ú‡•â‡§á‡§® ‡§¨‡§Ç‡§¶',
        full: '‡§´‡•Å‡§≤',
        proceedPayment: '‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§™‡•Ç‡§∞‡§æ ‡§ï‡§∞‡•á‡§Ç',
        enterUTR: 'UTR / TXID ‡§°‡§æ‡§≤‡•á‡§Ç',
        submitPayment: '‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç',
        cancel: '‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç',
        waitingApproval: '‡§á‡§Ç‡§§‡§ú‡§º‡§æ‡§∞ ‚Äî ‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§Ö‡§®‡•Å‡§Æ‡•ã‡§¶‡§® ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï',
        paymentSubmitted: '‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§π‡•Å‡§Ü ‚Äî ‡§Ö‡§®‡•Å‡§Æ‡•ã‡§¶‡§® ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ',
        paymentInProgress: '‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§ö‡§≤ ‡§∞‡§π‡•Ä ‡§π‡•à ‚Äî ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç',
        roomWaiting: '‡§∞‡•Ç‡§Æ: ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‚Äî ‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§Ö‡§®‡•Å‡§Æ‡•ã‡§¶‡§® ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï',
        refundMsg: '‡§∞‡§ø‡§´‡§Ç‡§° 20 ‡§Æ‡§ø‡§®‡§ü ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏ ‡§π‡•ã ‡§ú‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§',
        policyTitle: '‡§®‡•Ä‡§§‡§ø‡§Ø‡§æ‡§Å',
        policyText: '‡§Ø‡§π ‡§ñ‡•á‡§≤ ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§ ‡§Ö‡§™‡§®‡•Ä ‡§ú‡§ø‡§Æ‡•ç‡§Æ‡•á‡§¶‡§æ‡§∞‡•Ä ‡§™‡§∞ ‡§ñ‡•á‡§≤‡•á‡§Ç‡•§',
        whatsappLabel: 'WhatsApp',
        loginLabel: '‡§≤‡•â‡§ó‡§ø‡§® / ‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞',
        homeLabel: '‡§π‡•ã‡§Æ'
      },
      ur: {
        title: 'FREE FIRE TOURNAMENT',
        subtitle: 'Join ‚Ä¢ Play ‚Ä¢ Win Real Cash',
        join: 'ŸÖ€å⁄Ü ÿ¨Ÿàÿßÿ¶ŸÜ ⁄©ÿ±€å⁄∫',
        joinClosed: 'ÿ¨Ÿàÿßÿ¶ŸÜ ÿ®ŸÜÿØ',
        full: 'ŸÅŸÑ',
        proceedPayment: 'ÿßÿØÿßÿ¶€å⁄Ø€å ŸÖ⁄©ŸÖŸÑ ⁄©ÿ±€å⁄∫',
        enterUTR: 'UTR / TXID ÿØÿ±ÿ¨ ⁄©ÿ±€å⁄∫',
        submitPayment: 'ÿßÿØÿßÿ¶€å⁄Ø€å ÿ¨ŸÖÿπ ⁄©ÿ±€å⁄∫',
        cancel: 'ŸÖŸÜÿ≥ŸàÿÆ ⁄©ÿ±€å⁄∫',
        waitingApproval: 'ÿßŸÜÿ™ÿ∏ÿßÿ± ‚Äî ÿßÿØÿßÿ¶€å⁄Ø€å ⁄©€å ŸÖŸÜÿ∏Ÿàÿ±€å ÿØÿ±⁄©ÿßÿ± €Å€í',
        paymentSubmitted: 'ÿßÿØÿßÿ¶€å⁄Ø€å ÿ¨ŸÖÿπ €ÅŸà⁄Øÿ¶€å ‚Äî ŸÖŸÜÿ∏Ÿàÿ±€å ⁄©ÿß ÿßŸÜÿ™ÿ∏ÿßÿ±',
        paymentInProgress: 'ÿßÿØÿßÿ¶€å⁄Ø€å ÿ¨ÿßÿ±€å €Å€í ‚Äî ÿ®ÿ±ÿß€ÅŸê ⁄©ÿ±ŸÖ ÿßŸÜÿ™ÿ∏ÿßÿ± ⁄©ÿ±€å⁄∫',
        roomWaiting: '⁄©ŸÖÿ±€Å: ÿßŸÜÿ™ÿ∏ÿßÿ± ‚Äî ÿßÿØÿßÿ¶€å⁄Ø€å ⁄©€å ŸÖŸÜÿ∏Ÿàÿ±€å ÿØÿ±⁄©ÿßÿ± €Å€í',
        refundMsg: 'ÿ±ŸÇŸÖ ŸàÿßŸæÿ≥€å 20 ŸÖŸÜŸπ ⁄©€í ÿßŸÜÿØÿ± Ÿæÿ±Ÿàÿ≥€åÿ≥ €ÅŸàÿ™€å €Å€í€î',
        policyTitle: 'ŸæÿßŸÑ€åÿ≥€å',
        policyText: '€å€Å ⁄Ø€åŸÖ ÿÆÿ∑ÿ±ÿßÿ™ ÿ¥ÿßŸÖŸÑ ⁄©ÿ±ÿ™ÿß €Å€í€î ÿßŸæŸÜ€å ÿ∞ŸÖ€Å ÿØÿßÿ±€å Ÿæÿ± ⁄©⁄æ€åŸÑ€å⁄∫€î',
        whatsappLabel: 'WhatsApp',
        loginLabel: 'ŸÑÿß⁄Ø ÿßŸÜ / ÿ±ÿ¨ÿ≥Ÿπÿ±',
        homeLabel: '€ÅŸàŸÖ'
      }
    };

    function t(k){
      return STR[lang][k] ?? STR.en[k];
    }

    // ---------- Authentication / UI hooks
    const ui = {
      headerTitle: null,
      headerEmail: null,
      menuOverlay: null,
      matchesBox: null,
      payModal: null,
      utrInput: null,
      paymentStatusView: null,
      loginPanel: null,
      authEmail: null,
      authPass: null,
      authRegisterBtn: null,
      authLoginBtn: null
    };

    window.addEventListener('DOMContentLoaded', () => {
      ui.headerTitle = document.getElementById('hdr-title');
      ui.headerEmail = document.getElementById('hdr-email');
      ui.menuOverlay = document.getElementById('menu-overlay');
      ui.matchesBox = document.getElementById('matches');
      ui.payModal = document.getElementById('pay');
      ui.utrInput = document.getElementById('utr');
      ui.paymentStatusView = document.getElementById('payment-status');
      ui.loginPanel = document.getElementById('login-panel');
      ui.authEmail = document.getElementById('auth-email');
      ui.authPass = document.getElementById('auth-pass');
      ui.authRegisterBtn = document.getElementById('auth-register');
      ui.authLoginBtn = document.getElementById('auth-login');

      // wire register/login UI
      ui.authRegisterBtn.onclick = registerUser;
      ui.authLoginBtn.onclick = loginUser;

      // menu outside-click close
      document.getElementById('menu-overlay').addEventListener('click', (e)=>{
        if(e.target === ui.menuOverlay) closeMenu();
      });

      // listen auth
      onAuthStateChanged(auth, user => {
        if(user){
          ui.headerEmail.textContent = user.email;
          document.body.classList.add('logged-in');
        } else {
          ui.headerEmail.textContent = '';
          document.body.classList.remove('logged-in');
        }
      });

      // initial render text
      renderHeaderText();
    });

    function renderHeaderText(){
      document.getElementById('hdr-title').textContent = t('title');
      document.getElementById('hdr-sub').textContent = t('subtitle');
    }

    // ---------- Matches realtime listener
    function renderMatchesSnapshot(snapshot){
      ui.matchesBox.innerHTML = '';
      snapshot.forEach(docSnap => {
        const m = docSnap.data() || {};
        const id = docSnap.id;
        const entry = m.entry ?? 0;
        const win = m.win ?? 0;
        const status = (m.status || '').toString().toLowerCase();
        const joined = m.joinedPlayers ?? 0;
        const max = m.maxPlayers ?? m.slots ?? '‚Äî';
        const roomId = m.roomId ?? '';
        const password = m.password ?? '';
        const startAt = m.startTime || null; // timestamp number ms expected
        const isFull = (typeof max === 'number') && joined >= max;

        // status class color
        const statusClass = {
          'waiting': 'st-wait',
          'upcoming': 'st-upc',
          'running': 'st-live',
          'approved': 'st-approve',
          'open': 'st-open'
        }[status] || 'st-wait';

        // Timer HTML (if startTime exists)
        let timerHtml = '';
        if(startAt){
          timerHtml = `<div class="timer" data-start="${startAt}" id="timer-${id}">--:--</div>`;
        }

        // Room / payment hint box
        const roomBox = (status === 'approved' && roomId && password)
          ? `<div class="room ok"><strong>Room:</strong> ${escapeHtml(roomId)}<br><strong>Password:</strong> ${escapeHtml(password)}</div>`
          : `<div class="room hint">${escapeHtml(t('roomWaiting') )}</div>`;

        // Join button logic: if status is 'open' and not full show join; if full show Full button; else show Join Closed
        let actionBtn = '';
        if(isFull) {
          actionBtn = `<button class="btn full" disabled>${t('full')}</button>`;
        } else if(status === 'open' || status === 'waiting' || status === 'upcoming') {
          actionBtn = `<button class="btn join" onclick="openPay(${entry}, '${id}')">${t('join')}</button>`;
        } else {
          actionBtn = `<button class="btn closed" disabled>${t('joinClosed')}</button>`;
        }

        // markup
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <div class="card-left">
            <h3 class="match-type">${escapeHtml(m.type ?? id)}</h3>
            <p><strong>Entry:</strong> ‚Çπ${entry}</p>
            <p><strong>Win:</strong> ‚Çπ${win}</p>
            <p><strong>Players:</strong> ${joined} / ${max}</p>
            <p><strong>Status:</strong> <span class="status ${statusClass}">${escapeHtml(capitalize(status || 'waiting'))}</span></p>
          </div>
          <div class="card-right">
            ${timerHtml}
            ${roomBox}
            ${actionBtn}
          </div>
        `;
        ui.matchesBox.appendChild(card);

        // start timers for cards with startTime
        if(startAt){
          startTimerFor(id, startAt);
        }
      });
    }

    // Start countdown for a particular match id
    function startTimerFor(id, startAtMs){
      const el = document.getElementById('timer-'+id);
      if(!el) return;
      const update = () => {
        const now = Date.now();
        let diff = startAtMs - now;
        if(diff <= 0){
          el.textContent = 'Starting';
          el.classList.add('started');
          clearInterval(el._int);
          return;
        }
        const mins = Math.floor(diff / 60000);
        const secs = Math.floor((diff % 60000) / 1000);
        el.textContent = `${pad(mins)}:${pad(secs)}`;
      };
      update();
      el._int = setInterval(update, 1000);
    }

    function pad(n){ return n<10? '0'+n: n; }
    function capitalize(s){ if(!s) return s; return s.charAt(0).toUpperCase()+s.slice(1); }

    // safe escape
    function escapeHtml(str){ if(!str && str!==0) return ''; return String(str).replace(/[&<>"']/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' })[c]); }

    // Subscribe to matches collection
    onSnapshot(collection(db, "matches"), snap => {
      renderMatchesSnapshot(snap);
    });

    // ---------- Payment modal and flow
    window.openPay = (amt, matchId) => {
      if(!auth.currentUser) {
        openMenu(); // encourage login/register
        alert('Please login or register first.');
        return;
      }
      currentMatch = { id: matchId, amt };
      // Set amount text and UPI links
      document.getElementById('p-amt').innerText = `Total: ‚Çπ${amt}`;
      const upi = encodeURI(`upi://pay?pa=rizwanhasan90122778623@ybl&am=${amt}&cu=INR`);
      document.getElementById('gpay').href = upi;
      document.getElementById('ppay').href = upi;
      document.getElementById('paytm').href = upi;
      ui.utrInput.value = '';
      ui.payModal.style.display = 'flex';
      ui.paymentStatusView.style.display = 'none';
    };

    window.closePay = ()=>{
      ui.payModal.style.display = 'none';
    };

    window.copyA = (a,t) => {
      navigator.clipboard.writeText(a).then(()=> alert(t+' Address Copied!'));
    };

    // submit payment (adds document to 'payments')
    window.submitPayment = async () => {
      const utr = ui.utrInput.value.trim();
      if(!currentMatch) return alert('No match selected.');
      if(!utr) return alert(t('enterUTR'));
      const user = auth.currentUser;
      if(!user) return alert('Login required.');
      // create payments doc
      const payload = {
        userId: user.uid,
        userEmail: user.email,
        matchId: currentMatch.id,
        amount: currentMatch.amt,
        utr,
        status: 'pending',
        createdAt: Date.now()
      };
      try {
        const r = await addDoc(collection(db, 'payments'), payload);
        lastPaymentDocId = r.id;
        alert(t('paymentSubmitted'));
        ui.payModal.style.display = 'none';
        // open status view for this payment
        openPaymentStatusView(currentMatch.id);
      } catch(e){
        console.error(e);
        alert('Error submitting payment. Try again.');
      }
    };

    // open payment status view and listen for user's payment for this match
    async function openPaymentStatusView(matchId){
      ui.paymentStatusView.style.display = 'block';
      ui.paymentStatusView.innerHTML = `<h2>Payment Status</h2><div id="ps-box">Checking payment...</div><button class="back" onclick="backToMatches()">Back to matches</button>`;
      const user = auth.currentUser;
      if(!user) return document.getElementById('ps-box').innerText = 'Login required.';

      // query latest payment by this user for this match
      const q = query(collection(db, 'payments'),
        where('userId', '==', user.uid),
        where('matchId', '==', matchId),
        orderBy('createdAt', 'desc'),
        limit(1)
      );

      const unsub = onSnapshot(q, async snap => {
        if(snap.empty){
          document.getElementById('ps-box').innerHTML = `<div class="status-box">${escapeHtml(t('paymentInProgress'))}</div>`;
          return;
        }
        const pDoc = snap.docs[0];
        const p = pDoc.data();
        const status = p.status || 'pending';
        const box = document.getElementById('ps-box');

        // fetch match doc for room info
        const mRef = doc(db, 'matches', matchId);
        const mSnap = await getDoc(mRef);
        const match = mSnap.exists()? mSnap.data() : null;

        // show info
        let html = `<div class="status-box">Status: <strong>${escapeHtml(capitalize(status))}</strong></div>`;
        html += `<div class="p-info"><strong>Match:</strong> ${escapeHtml(match?.type ?? matchId)}<br>`;
        html += `<strong>Amount:</strong> ‚Çπ${p.amount}<br>`;
        html += `<strong>UTR:</strong> ${escapeHtml(p.utr)}<br>`;
        if(status === 'approved' && match){
          html += `<div class="room ok">Room ID: ${escapeHtml(match.roomId || '')}<br>Password: ${escapeHtml(match.password || '')}</div>`;
        } else {
          html += `<div class="room note">${escapeHtml(t('roomWaiting'))}</div>`;
        }
        box.innerHTML = html;
      });

      // auto-unsubscribe when leaving status view
      ui.paymentStatusView._unsub = unsub;
    }

    window.backToMatches = ()=>{
      ui.paymentStatusView.style.display = 'none';
      if(ui.paymentStatusView._unsub) ui.paymentStatusView._unsub();
    };

    // ---------- Login / Register flows
    async function registerUser(){
      const email = ui.authEmail.value.trim();
      const pass = ui.authPass.value.trim();
      if(!email || !pass) return alert('Enter email & password.');
      try {
        await createUserWithEmailAndPassword(auth, email, pass);
        alert('Account created & logged in.');
        ui.authEmail.value = '';
        ui.authPass.value = '';
        closeMenu();
      } catch(e){
        console.error(e);
        alert('Error creating account: ' + (e.message||e));
      }
    }

    async function loginUser(){
      const email = ui.authEmail.value.trim();
      const pass = ui.authPass.value.trim();
      if(!email || !pass) return alert('Enter email & password.');
      try {
        await signInWithEmailAndPassword(auth, email, pass);
        alert('Logged in.');
        ui.authEmail.value = '';
        ui.authPass.value = '';
        closeMenu();
      } catch(e){
        console.error(e);
        alert('Login failed: ' + (e.message||e));
      }
    }

    window.doLogout = async ()=>{
      await signOut(auth);
      alert('Logged out.');
      closeMenu();
    };

    // ---------- Menu controls
    window.openMenu = ()=>{
      ui.menuOverlay.style.display = 'block';
      ui.menuOverlay.classList.add('open');
    };
    window.closeMenu = ()=>{
      ui.menuOverlay.style.display = 'none';
      ui.menuOverlay.classList.remove('open');
    };

    // language switch
    window.setLang = (L)=>{
      lang = L;
      renderHeaderText();
      closeMenu();
    };

    // ---------- small utility to ensure header banner / email area behavior
    window.showBannerImage = (show=true) => {
      document.getElementById('header-banner').style.display = show ? 'block' : 'none';
    };

    // ---------- initialize small UI pieces on load (hook)
    // Nothing else to do here; listeners above handle reactivity

  </script>

  <style>
    :root{
      --bg:#050505;
      --card:#0f0f0f;
      --muted:#999;
      --accent: #f2c94c; /* gold */
      --green:#00ff88;
      --panel: #111;
      --btn-bg: #f3c83d;
      --btn-text: #111;
    }
    html,body{height:100%;margin:0;background:var(--bg);color:#fff;font-family:Inter,system-ui,Arial,Helvetica,sans-serif;-webkit-font-smoothing:antialiased}
    header.site {
      padding:12px 18px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      border-bottom:3px solid rgba(255,200,20,0.06);
      position:sticky;
      top:0;
      z-index:50;
      background:linear-gradient(180deg, rgba(0,0,0,0.85), rgba(0,0,0,0.7));
      backdrop-filter: blur(4px);
    }
    .hdr-left{display:flex;align-items:center;gap:12px}
    #hdr-icon{cursor:pointer;font-size:26px;color:var(--green)}
    #hdr-title{font-size:22px;color:var(--accent);font-weight:800;letter-spacing:0.5px}
    #hdr-sub{font-size:12px;color:var(--muted);margin-top:2px}
    #hdr-email{color:var(--green);font-weight:700;font-size:13px;margin-left:12px}
    .hdr-right{display:flex;gap:10px;align-items:center}
    #hamb{width:40px;height:32px;border-radius:6px;background:transparent;border:2px solid var(--green);display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--green)}
    #logout-btn{background:#ff5454;color:#fff;padding:6px 10px;border-radius:8px;border:none;cursor:pointer;font-weight:700;display:none}
    body.logged-in #logout-btn{display:inline-block}

    main{padding:18px;max-width:820px;margin:0 auto}
    #header-banner{width:100%;height:120px;background:url('') center/cover no-repeat;border-radius:6px;display:none;margin-bottom:12px}
    .matches-grid{display:flex;flex-direction:column;gap:14px;margin-top:6px}
    .card{display:flex;justify-content:space-between;gap:12px;background:var(--card);padding:18px;border-radius:14px;border:1px solid rgba(255,255,255,0.02)}
    .card-left{flex:1}
    .card-right{width:220px;display:flex;flex-direction:column;gap:10px;align-items:flex-end}
    .match-type{color:var(--green);margin:0 0 8px 0}
    .card p{margin:6px 0;color:#ddd}
    .status{display:inline-block;padding:6px 10px;border-radius:8px;background:rgba(255,255,255,0.03);font-weight:700}
    .st-wait{background:rgba(255,255,255,0.03);color:#ddd}
    .st-upc{background:rgba(255,200,20,0.12);color:var(--accent)}
    .st-live{background:rgba(0,255,136,0.12);color:var(--green)}
    .st-open{background:rgba(0,200,200,0.06);color:#9ff}
    .room{background:rgba(255,255,255,0.03);padding:8px;border-radius:8px;color:#ddd;font-size:13px}
    .room.ok{background:rgba(0,255,136,0.06);color:var(--green)}
    .room.hint{opacity:0.9}
    .btn{border:none;padding:11px 14px;border-radius:10px;font-weight:800;cursor:pointer}
    .btn.join{background:var(--btn-bg);color:var(--btn-text);width:180px}
    .btn.full{background:#b08a2b;color:#fff;width:140px}
    .btn.closed{background:#444;color:#ddd;width:140px}
    .timer{font-weight:700;color:var(--muted);padding:6px 10px;border-radius:8px;background:rgba(255,255,255,0.02)}
    .status-box{padding:12px;background:var(--panel);border-radius:10px;margin-bottom:12px}
    .back{background:#222;color:#fff;padding:8px 12px;border-radius:8px;border:1px solid #333;cursor:pointer}
    footer{padding:20px;text-align:center;color:var(--muted);font-size:13px}

    /* payment modal */
    #pay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.75);z-index:120}
    .paybox{background:var(--panel);padding:22px;border-radius:18px;width:92%;max-width:420px;border:3px solid var(--accent);text-align:center}
    .paybox h2{color:var(--accent);margin:8px 0 10px 0}
    .p-btn{display:flex;align-items:center;gap:12px;padding:12px;border-radius:12px;margin:8px 0;background:#0a0a0a;border:1px solid #212121;cursor:pointer;color:#fff;text-decoration:none}
    .p-btn img{width:28px;height:28px;border-radius:6px}
    .v-input{width:100%;padding:12px;border-radius:10px;border:1px solid #333;background:#030303;color:var(--green);font-weight:800;text-align:center}
    .v-btn{background:var(--green);border:none;padding:12px;border-radius:10px;font-weight:900;color:#000;cursor:pointer;margin-top:10px;width:100%}
    .small-note{color:var(--muted);font-size:13px;margin-top:8px}

    /* menu overlay (right side) */
    #menu-overlay{position:fixed;inset:0;display:none;z-index:200}
    #menu-panel{position:absolute;right:0;top:0;width:86%;max-width:360px;height:100%;background:#080808;border-left:1px solid rgba(255,255,255,0.03);padding:18px;overflow:auto}
    .menu-item{display:flex;gap:12px;align-items:center;padding:16px;border-radius:8px;cursor:pointer}
    .menu-item:hover{background:rgba(255,255,255,0.01)}
    .menu-item .icon{width:36px;height:36px;border-radius:8px;background:#0b0b0b;display:flex;align-items:center;justify-content:center;color:var(--green);font-weight:800}
    .menu-footer{margin-top:30px;color:var(--muted);font-size:13px}

    /* login form inside menu */
    #login-panel{margin-top:12px;padding:12px;background:#0b0b0b;border-radius:8px}
    #login-panel input{width:100%;padding:10px;margin:8px 0;border-radius:8px;border:1px solid #222;background:#020202;color:#fff}
    #login-panel button{padding:8px 10px;border-radius:8px;background:var(--btn-bg);border:none;color:#111;font-weight:800;cursor:pointer;margin-right:8px}

    /* small screens fix */
    @media (min-width:900px){
      main{padding:30px}
      .card-right{width:300px;align-items:flex-end}
    }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header class="site">
    <div class="hdr-left">
      <div id="hdr-icon" onclick="location.reload()">‚ò∞</div>
      <div>
        <div id="hdr-title">FREE FIRE TOURNAMENT</div>
        <div id="hdr-sub">Join ‚Ä¢ Play ‚Ä¢ Win Real Cash</div>
      </div>
      <div id="hdr-email" style="margin-left:12px;color:var(--green)"></div>
    </div>

    <div class="hdr-right">
      <button id="logout-btn" onclick="doLogout()">Logout</button>
      <div id="hamb" title="Menu" onclick="openMenu()">‚ò∞</div>
    </div>
  </header>

  <!-- Menu overlay panel -->
  <div id="menu-overlay" aria-hidden="true">
    <div id="menu-panel">
      <div style="display:flex;align-items:center;justify-content:space-between">
        <div style="display:flex;gap:12px;align-items:center">
          <div style="width:46px;height:46px;border-radius:8px;background:var(--card);display:flex;align-items:center;justify-content:center;color:var(--green)">‚öë</div>
          <div>
            <div style="font-weight:800" id="menu-title">Home</div>
            <div style="font-size:12px;color:var(--muted)">Return to matches</div>
          </div>
        </div>
        <div style="cursor:pointer" onclick="closeMenu()">‚úï</div>
      </div>

      <div style="margin-top:18px">
        <div class="menu-item" onclick="backToMatches(); closeMenu();">
          <div class="icon">üè†</div>
          <div><strong>Home</strong><div style="font-size:12px;color:var(--muted)">Return to matches</div></div>
        </div>

        <div class="menu-item" onclick="alert(t('policyText'))">
          <div class="icon">üìú</div>
          <div><strong>Policy</strong><div style="font-size:12px;color:var(--muted)">${/* placeholder */''}</div></div>
        </div>

        <a class="menu-item" href="https://wa.me/919012277862" target="_blank" style="text-decoration:none;color:inherit">
          <div class="icon">üí¨</div>
          <div><strong>WhatsApp</strong><div style="font-size:12px;color:var(--muted)">+91 9012277862</div></div>
        </a>

        <div style="height:8px"></div>

        <div style="display:flex;flex-direction:column;gap:6px">
          <div class="menu-item" onclick="setLang('en')"><div class="icon">EN</div><div><strong>English</strong></div></div>
          <div class="menu-item" onclick="setLang('hi')"><div class="icon">HI</div><div><strong>Hindi (Roman)</strong></div></div>
          <div class="menu-item" onclick="setLang('ur')"><div class="icon">UR</div><div><strong>Urdu (Roman)</strong></div></div>
        </div>

        <div id="login-panel">
          <div style="font-weight:800;margin-bottom:6px">Login / Register</div>
          <input id="auth-email" placeholder="Email" type="email" />
          <input id="auth-pass" placeholder="Password" type="password" />
          <div style="display:flex;gap:8px">
            <button id="auth-register">Register</button>
            <button id="auth-login">Login</button>
          </div>
          <div style="margin-top:8px;color:var(--muted);font-size:13px">
            { Registration creates a simple email/password account for quick demo. }
          </div>
        </div>

        <div class="menu-footer" style="margin-top:18px">
          <div style="font-weight:700;color:var(--muted)">${STR.en.refundMsg}</div>
        </div>
      </div>
    </div>
  </div>

  <!-- MAIN -->
  <main>
    <div id="header-banner" style="background-image:url('https://i.imgur.com/6r0bVZC.jpg');display:block"></div>

    <div id="matches" class="matches-grid">
      <!-- cards injected here -->
    </div>

    <!-- Payment status view (hidden by default) -->
    <div id="payment-status" style="display:none;margin-top:18px"></div>

    <footer>
      ¬© 2026 SQL ‚Äî Premium Tournament System<br/>¬© All rights reserved
    </footer>
  </main>

  <!-- Payment modal (UPI + UTR) -->
  <div id="pay">
    <div class="paybox">
      <h2 id="p-amt">Total: ‚Çπ0</h2>

      <a id="gpay" class="p-btn" href="#" target="_blank"><img src="https://img.icons8.com/color/48/google-pay.png" alt="GPay"> Google Pay</a>
      <a id="ppay" class="p-btn" href="#" target="_blank"><img src="https://img.icons8.com/color/48/phone-pe.png" alt="PhonePe"> PhonePe</a>
      <a id="paytm" class="p-btn" href="#" target="_blank"><img src="https://img.icons8.com/color/48/paytm.png" alt="Paytm"> Paytm</a>

      <input id="utr" class="v-input" placeholder="Enter UTR / TXID" />
      <button class="v-btn" onclick="submitPayment()">${STR.en.submitPayment}</button>
      <button onclick="closePay()" style="color:#ff6666;border:none;background:none;margin-top:12px;cursor:pointer;font-weight:700">${STR.en.cancel}</button>
      <div class="small-note" style="margin-top:10px">${STR.en.refundMsg}</div>
    </div>
  </div>

  <!-- SCRIPTS: small UI utilities (non-Firebase) -->
  <script>
    // Keep header banner email area aligned & stable: avoid layout shifts
    // Ensure menu overlay sizing
    window.addEventListener('resize', () => {
      // keep things stable, no zooming shifts
      document.documentElement.style.fontSize = '100%';
    });

    // Ensure header banner visible with fast load (user wanted banner instead of email)
    document.getElementById('header-banner').style.display = 'block';
  </script>

</body>
            </html>
